{
  "openapi": "3.0.4",
  "info": {
    "title": "DailyCheck API v1",
    "description": "DailyCheck API v1",
    "version": "v1"
  },
  "paths": {
    "/mm/Auth/register": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "用户注册，创建新账号并返回访问令牌和刷新令牌。",
        "requestBody": {
          "description": "注册请求参数。",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          }
        }
      }
    },
    "/mm/Auth/login": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "用户登录，校验邮箱和密码并返回访问令牌和刷新令牌。",
        "requestBody": {
          "description": "登录请求参数。",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          }
        }
      }
    },
    "/mm/Auth/login-account": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "用户登录，校验账号和密码并返回访问令牌和刷新令牌。",
        "requestBody": {
          "description": "登录请求参数。",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AccountLoginRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/AccountLoginRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/AccountLoginRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          }
        }
      }
    },
    "/mm/Auth/refresh": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "使用刷新令牌获取新的访问令牌和刷新令牌，实现双 token 单点登录。",
        "requestBody": {
          "description": "包含刷新令牌的请求。",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RefreshTokenRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/RefreshTokenRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/RefreshTokenRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          }
        }
      }
    },
    "/mm/Auth/email-code": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "发送注册或登录使用的邮箱验证码。",
        "requestBody": {
          "description": "包含目标邮箱地址的请求参数。",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SendEmailCodeRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/SendEmailCodeRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/SendEmailCodeRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/mm/Auth/deactivate": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "用户自行注销账号。",
        "requestBody": {
          "description": "注销请求参数。",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DeactivateAccountRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/DeactivateAccountRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/DeactivateAccountRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/mm/Auth/change-password": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "修改当前登录用户的密码。",
        "requestBody": {
          "description": "修改密码请求参数。",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChangePasswordRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/ChangePasswordRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/ChangePasswordRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/mm/Auth/profile": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "更新当前登录用户的个人资料（只能更新昵称和头像）。",
        "requestBody": {
          "description": "更新个人资料的请求参数。",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserProfileRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserProfileRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserProfileRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          }
        }
      }
    },
    "/mm/Auth/me": {
      "get": {
        "tags": [
          "Auth"
        ],
        "summary": "获取当前登录用户的基本信息。",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/UserBasicResponse"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserBasicResponse"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserBasicResponse"
                }
              }
            }
          }
        }
      }
    },
    "/mm/Auth/account/status": {
      "get": {
        "tags": [
          "Auth"
        ],
        "summary": "检查当前用户是否可以修改账号名。\r\n规则：一年内只能修改一次。",
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/mm/Auth/account": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "更新用户账号名（一年一次）。",
        "requestBody": {
          "description": "包含新账号名的请求。",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserAccountRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserAccountRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserAccountRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          }
        }
      }
    },
    "/mm/Auth/validate-account": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "验证用户名是否已存在。",
        "parameters": [
          {
            "name": "UserAccount",
            "in": "query",
            "description": "用户名",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/mm/Checkins/daily": {
      "post": {
        "tags": [
          "Checkins"
        ],
        "summary": "用户当天打卡接口。",
        "requestBody": {
          "description": "打卡请求参数。",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DailyCheckinRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/DailyCheckinRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/DailyCheckinRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/mm/Checkins/retro": {
      "post": {
        "tags": [
          "Checkins"
        ],
        "summary": "补打卡接口。",
        "requestBody": {
          "description": "补打卡请求参数。",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RetroCheckinRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/RetroCheckinRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/RetroCheckinRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/mm/Checkins/calendar": {
      "get": {
        "tags": [
          "Checkins"
        ],
        "summary": "获取指定打卡计划在某年某月的日历打卡状态。",
        "parameters": [
          {
            "name": "planId",
            "in": "query",
            "description": "打卡计划 ID。",
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "year",
            "in": "query",
            "description": "年份。",
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "month",
            "in": "query",
            "description": "月份。",
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/CalendarStatusItem"
                  }
                }
              },
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/CalendarStatusItem"
                  }
                }
              },
              "text/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/CalendarStatusItem"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/mm/Checkins/detail": {
      "get": {
        "tags": [
          "Checkins"
        ],
        "summary": "获取某个打卡计划在指定日期的打卡详情。",
        "parameters": [
          {
            "name": "planId",
            "in": "query",
            "description": "打卡计划 ID。",
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "date",
            "in": "query",
            "description": "需要查询的日期。",
            "schema": {
              "type": "string",
              "format": "date"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/CheckinDetailResponse"
                  }
                }
              },
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/CheckinDetailResponse"
                  }
                }
              },
              "text/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/CheckinDetailResponse"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/mm/Files/avatar": {
      "post": {
        "tags": [
          "Files"
        ],
        "summary": "上传当前登录用户的头像（公开访问）。\r\n上传成功后会自动更新该用户的头像链接。",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "description": "待上传的图片文件。",
                    "format": "binary"
                  }
                }
              },
              "encoding": {
                "file": {
                  "style": "form"
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/mm/Files/users/{userId}/{key}": {
      "get": {
        "tags": [
          "Files"
        ],
        "summary": "获取指定用户的头像（公开接口）。",
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "description": "指定的用户ID。",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "key",
            "in": "path",
            "description": "图片文件 Key。",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/mm/Files/images": {
      "post": {
        "tags": [
          "Files"
        ],
        "summary": "上传单张图片文件并返回仅当前用户可访问的图片 URL。\r\n所有上传的图片都将自动转换为 WebP 格式存储。",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "description": "待上传的图片文件。",
                    "format": "binary"
                  }
                }
              },
              "encoding": {
                "file": {
                  "style": "form"
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/mm/Files/images/{fileKey}": {
      "get": {
        "tags": [
          "Files"
        ],
        "summary": "获取当前用户已上传的图片内容，仅可访问自己的图片。",
        "parameters": [
          {
            "name": "fileKey",
            "in": "path",
            "description": "上传时返回的图片标识。",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/mm/Plans": {
      "get": {
        "tags": [
          "Plans"
        ],
        "summary": "获取当前登录用户的打卡计划列表。",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/PlanSummary"
                  }
                }
              },
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/PlanSummary"
                  }
                }
              },
              "text/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/PlanSummary"
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Plans"
        ],
        "summary": "为当前登录用户创建新的打卡计划。",
        "requestBody": {
          "description": "创建计划的请求参数。",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreatePlanRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/CreatePlanRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/CreatePlanRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/PlanSummary"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PlanSummary"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/PlanSummary"
                }
              }
            }
          }
        }
      }
    },
    "/mm/Plans/update": {
      "post": {
        "tags": [
          "Plans"
        ],
        "summary": "更新指定的打卡计划。",
        "requestBody": {
          "description": "更新计划的请求参数。",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdatePlanRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdatePlanRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/UpdatePlanRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/mm/Plans/delete": {
      "post": {
        "tags": [
          "Plans"
        ],
        "summary": "删除指定的打卡计划。",
        "parameters": [
          {
            "name": "PlanId",
            "in": "query",
            "description": "打卡计划ID",
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AccountLoginRequest": {
        "type": "object",
        "properties": {
          "userAccount": {
            "type": "string",
            "nullable": true
          },
          "password": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "AuthResponse": {
        "type": "object",
        "properties": {
          "userId": {
            "type": "integer",
            "format": "int64"
          },
          "email": {
            "type": "string",
            "nullable": true
          },
          "nickName": {
            "type": "string",
            "nullable": true
          },
          "userAccount": {
            "type": "string",
            "nullable": true
          },
          "avatarKey": {
            "type": "string",
            "nullable": true
          },
          "token": {
            "type": "string",
            "nullable": true
          },
          "refreshToken": {
            "type": "string",
            "nullable": true
          },
          "accessTokenExpiresAt": {
            "type": "string",
            "format": "date-time"
          },
          "refreshTokenExpiresAt": {
            "type": "string",
            "format": "date-time"
          }
        },
        "additionalProperties": false,
        "description": "认证响应数据，包含用户信息和双 token 信息。"
      },
      "CalendarStatusItem": {
        "type": "object",
        "properties": {
          "date": {
            "type": "string",
            "description": "日期。",
            "format": "date"
          },
          "checkinMode": {
            "type": "integer",
            "description": "打卡模式：0-默认模式，1-时间段打卡模式",
            "format": "int32"
          },
          "status": {
            "type": "integer",
            "description": "打卡状态：1=正常打卡，2=补打卡等。",
            "format": "int32",
            "nullable": true
          },
          "timeSlots": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TimeSlotStatusItem"
            },
            "description": "时间段打卡详情列表（仅时间段打卡模式会有）",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "日历打卡状态项。"
      },
      "ChangePasswordRequest": {
        "type": "object",
        "properties": {
          "oldPassword": {
            "type": "string",
            "nullable": true
          },
          "newPassword": {
            "type": "string",
            "nullable": true
          },
          "code": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "CheckinDetailResponse": {
        "type": "object",
        "properties": {
          "date": {
            "type": "string",
            "description": "打卡日期。",
            "format": "date"
          },
          "status": {
            "type": "integer",
            "description": "打卡状态：0错过、1正常打卡、2补打卡。",
            "format": "int32"
          },
          "note": {
            "type": "string",
            "description": "打卡备注信息，可为空。",
            "nullable": true
          },
          "imageUrls": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "打卡图片 URL 列表。",
            "nullable": true
          },
          "timeSlotId": {
            "type": "integer",
            "description": "关联的时间段ID（如果有）",
            "format": "int64",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "某一天的打卡详情返回结果。"
      },
      "CreatePlanRequest": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string",
            "description": "打卡计划标题。",
            "nullable": true
          },
          "description": {
            "type": "string",
            "description": "计划描述，可为空。",
            "nullable": true
          },
          "startDate": {
            "type": "string",
            "description": "计划开始日期，不传则默认为当天。",
            "format": "date",
            "nullable": true
          },
          "endDate": {
            "type": "string",
            "description": "计划结束日期，可为空。",
            "format": "date",
            "nullable": true
          },
          "timeSlots": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TimeSlotDto"
            },
            "description": "打卡时间段列表",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "创建打卡计划的请求参数。"
      },
      "DailyCheckinRequest": {
        "type": "object",
        "properties": {
          "planId": {
            "type": "integer",
            "description": "对应的打卡计划 ID。",
            "format": "int64"
          },
          "imageUrls": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "打卡图片 URL 列表，可为空。",
            "nullable": true
          },
          "note": {
            "type": "string",
            "description": "打卡备注信息，可为空。",
            "nullable": true
          },
          "timeSlotId": {
            "type": "integer",
            "description": "时间段 ID（可选，用于分时段打卡）",
            "format": "int64",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "当日打卡请求参数。"
      },
      "DeactivateAccountRequest": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "LoginRequest": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "description": "用户邮箱地址。",
            "nullable": true
          },
          "password": {
            "type": "string",
            "description": "登录密码明文，将在服务端进行哈希验证。",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "用户登录请求参数。"
      },
      "PlanSummary": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "计划唯一标识。",
            "format": "int64"
          },
          "title": {
            "type": "string",
            "description": "计划标题。",
            "nullable": true
          },
          "description": {
            "type": "string",
            "description": "计划描述，可为空。",
            "nullable": true
          },
          "startDate": {
            "type": "string",
            "description": "计划开始日期。",
            "format": "date"
          },
          "endDate": {
            "type": "string",
            "description": "计划结束日期，可为空。",
            "format": "date",
            "nullable": true
          },
          "isActive": {
            "type": "boolean",
            "description": "是否处于启用状态。",
            "nullable": true
          },
          "timeSlots": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TimeSlotDto"
            },
            "description": "打卡时间段列表",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "打卡计划概要信息，用于列表展示。"
      },
      "RefreshTokenRequest": {
        "type": "object",
        "properties": {
          "refreshToken": {
            "type": "string",
            "description": "长期刷新令牌字符串。",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "刷新令牌请求参数。"
      },
      "RegisterRequest": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "nullable": true
          },
          "password": {
            "type": "string",
            "nullable": true
          },
          "nickName": {
            "type": "string",
            "nullable": true
          },
          "userAccount": {
            "type": "string",
            "nullable": true
          },
          "code": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "用户注册请求参数。"
      },
      "RetroCheckinRequest": {
        "type": "object",
        "properties": {
          "planId": {
            "type": "integer",
            "description": "对应的打卡计划 ID。",
            "format": "int64"
          },
          "date": {
            "type": "string",
            "description": "需要补打卡的日期。",
            "format": "date"
          },
          "imageUrls": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "打卡图片 URL 列表，可为空。",
            "nullable": true
          },
          "note": {
            "type": "string",
            "description": "补打卡备注信息，可为空。",
            "nullable": true
          },
          "timeSlotId": {
            "type": "integer",
            "description": "时间段 ID（可选，用于分时段打卡）",
            "format": "int64",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "补打卡请求参数。"
      },
      "SendEmailCodeRequest": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "description": "接收验证码的邮箱地址。",
            "nullable": true
          },
          "actionType": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "发送邮箱验证码请求参数。"
      },
      "TimeSlotDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "时间段ID（创建时为空，更新时必填）",
            "format": "int64",
            "nullable": true
          },
          "slotName": {
            "type": "string",
            "description": "时间段名称，如“早晨”",
            "nullable": true
          },
          "startTime": {
            "type": "string",
            "description": "开始时间（HH:mm:ss）",
            "format": "time"
          },
          "endTime": {
            "type": "string",
            "description": "结束时间（HH:mm:ss）",
            "format": "time"
          },
          "orderNum": {
            "type": "integer",
            "description": "排序序号",
            "format": "int32"
          },
          "isActive": {
            "type": "boolean",
            "description": "是否启用"
          }
        },
        "additionalProperties": false,
        "description": "打卡时间段数据传输对象"
      },
      "TimeSlotStatusItem": {
        "type": "object",
        "properties": {
          "checkinId": {
            "type": "integer",
            "description": "对应的打卡记录 ID。",
            "format": "int64"
          },
          "timeSlotId": {
            "type": "integer",
            "description": "打卡时间段ID。",
            "format": "int64",
            "nullable": true
          },
          "status": {
            "type": "integer",
            "description": "时间段打卡状态：1=正常打卡，2=补打卡等。",
            "format": "int32"
          }
        },
        "additionalProperties": false,
        "description": "时间段打卡详情请求参数。"
      },
      "UpdatePlanRequest": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "打卡计划唯一标识。",
            "format": "int64"
          },
          "title": {
            "type": "string",
            "description": "打卡计划标题。",
            "nullable": true
          },
          "description": {
            "type": "string",
            "description": "计划描述，可为空。",
            "nullable": true
          },
          "isActive": {
            "type": "boolean",
            "description": "是否处于启用状态。"
          },
          "startDate": {
            "type": "string",
            "description": "计划开始日期，不传则默认为当天。",
            "format": "date",
            "nullable": true
          },
          "endDate": {
            "type": "string",
            "description": "计划结束日期，可为空。",
            "format": "date",
            "nullable": true
          },
          "timeSlots": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TimeSlotDto"
            },
            "description": "打卡时间段列表",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "更新打卡计划的请求参数。"
      },
      "UpdateUserAccountRequest": {
        "type": "object",
        "properties": {
          "userAccount": {
            "type": "string",
            "description": "新的用户账号名。",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "更新用户账号请求参数。"
      },
      "UpdateUserProfileRequest": {
        "type": "object",
        "properties": {
          "nickName": {
            "type": "string",
            "nullable": true
          },
          "avatarKey": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "UserBasicResponse": {
        "type": "object",
        "properties": {
          "userId": {
            "type": "integer",
            "format": "int64"
          },
          "email": {
            "type": "string",
            "nullable": true
          },
          "nickName": {
            "type": "string",
            "nullable": true
          },
          "userAccount": {
            "type": "string",
            "nullable": true
          },
          "avatarKey": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false
      }
    },
    "securitySchemes": {
      "Bearer": {
        "type": "apiKey",
        "description": "在下框中输入请求头中需要添加Jwt授权Token：Bearer Token",
        "name": "Authorization",
        "in": "header"
      }
    }
  },
  "security": [
    {
      "Bearer": [ ]
    }
  ]
}